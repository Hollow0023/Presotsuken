# 会計履歴 状態列の表示変更

## 変更内容

個別会計の状態列に「個別」と表示されるようになりました。

## 表示例（変更後）

```
┌────────┬──────────────────┬──────────┬────────────┬────────────┬──────┬──────────┐
│  状態  │      日時        │   席     │  税抜合計  │  税込合計  │ 担当 │   操作   │
├────────┼──────────────────┼──────────┼────────────┼────────────┼──────┼──────────┤
│        │ 2025-10-28 10:00 │ テーブル1│   1,000円  │   1,100円  │ 田中 │ 会計詳細 │  ← 通常会計
├────────┼──────────────────┼──────────┼────────────┼────────────┼──────┼──────────┤
│   割   │ 2025-10-28 10:30 │ テーブル2│   3,000円  │   3,300円  │ 佐藤 │ 会計詳細 │  ← 割り勘会計（親）
├────────┼──────────────────┼──────────┼────────────┼────────────┼──────┼──────────┤
│  個別  │ 2025-10-28 11:00 │ テーブル3│     800円  │     880円  │ 鈴木 │ 会計詳細 │  ← 個別会計（子1）
├────────┼──────────────────┼──────────┼────────────┼────────────┼──────┼──────────┤
│  個別  │ 2025-10-28 11:05 │ テーブル3│   1,200円  │   1,320円  │ 高橋 │ 会計詳細 │  ← 個別会計（子2）
└────────┴──────────────────┴──────────┴────────────┴────────────┴──────┴──────────┘
```

## 変更前との比較

### 変更前
- 通常会計: (空白)
- 割り勘会計: 割
- 個別会計: (空白) ← **区別がつかなかった**

### 変更後
- 通常会計: (空白)
- 割り勘会計: 割
- 個別会計: **個別** ← **新たに追加**

## 実装詳細

paymentHistory.html の状態列（45-49行目）:

```html
<td class="status-cell">
    <span th:if="${payment.visitCancel or payment.cancel}">削除済</span>
    <span th:if="${!payment.visitCancel and !payment.cancel and payment.totalSplits != null and payment.totalSplits > 0}">割</span>
    <span th:if="${!payment.visitCancel and !payment.cancel and payment.parentPayment != null and (payment.totalSplits == null or payment.totalSplits == 0)}">個別</span>
</td>
```

### 判定条件

**個別会計の判定**:
- `payment.parentPayment != null` (親会計が存在する = 子会計)
- かつ `payment.totalSplits == null or payment.totalSplits == 0` (割り勘ではない)

この条件により、個別会計の子会計のみが「個別」と表示されます。
