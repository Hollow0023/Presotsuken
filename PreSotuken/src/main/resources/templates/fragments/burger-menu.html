<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <!-- バーガーメニューボタン -->
    <button th:fragment="burger-button" class="burger" onclick="toggleMenu()">☰</button>

    <!-- バーガーメニュードロワー -->
    <div th:fragment="burger-drawer">
        <nav id="menuDrawer" class="menu-drawer">
            <div>
				<a href="/">トップページ</a>
                <details class="menu-group" close>
                    <summary class="menu-group-title">メニュー設定</summary>
                    <a href="/menu/list">メニュー管理</a>
                    <a href="/menu/group/add">メニューグループ管理</a>
                    <a href="/options">オプション管理</a>
                    <a href="/menu/sold-out-management">メニュー品切れ管理</a>
                </details>

                <details class="menu-group" close>
                    <summary class="menu-group-title">事務操作</summary>
                    <a th:href="@{/admin/cash/transaction}">入出金</a>
                    <a th:href="@{/admin/cash/history}">入出金履歴</a>
                    <a th:href="@{/payments/history}">会計履歴</a>
                    <a th:href="@{/payment-types}">支払い方法管理</a>
                    <a th:href="@{/taxrates/setting}">税率設定</a>
                    <a th:href="@{/sales-analysis}">売上分析</a>
                    <a th:href="@{/admin/inspection/form}">点検</a>
                    <a th:href="@{/admin/inspection/history}">点検履歴</a>
                </details>

                <details class="menu-group" close>
                    <summary class="menu-group-title">店舗設定</summary>
                    <a href="/admin/printers" >プリンター管理</a>
                    <a href="/admin/plans">プラン管理</a>
                    <a href="/admin/terminals">端末管理</a>
                    <a th:href="@{/admin/logo}">ロゴ設定</a>
                    <a th:href="@{/admin/store/edit}">店舗設定</a>
                    <a th:href="@{/admin/time-slots}">時間帯管理</a>
                    <a th:href="@{/seat/edit}">座席グループ・座席編集</a>
                    <a th:href="@{/admin/staff}">スタッフ編集</a>
                </details>
            </div>

            <form th:action="@{/logout}" method="get" onsubmit="clearUserIdCookie()">
                <button type="submit">ログアウト</button>
            </form>
        </nav>
    </div>

    <!-- バーガーメニューのCSS（navigation.cssで定義済みのため、ここでは空のフラグメント） -->
    <div th:fragment="burger-menu-css">
        <!-- CSS is already defined in /css/components/navigation.css -->
    </div>

    <!-- バーガーメニューのJavaScript -->
    <div th:fragment="burger-menu-js">
        <script>
            /**
             * メニュー外のクリックを検知してメニューを閉じる関数
             * @param {Event} event - クリックイベントオブジェクト
             */
            function handleOutsideMenuClick(event) {
                const drawer = document.getElementById("menuDrawer");
                const burger = document.querySelector(".burger");

                if (!drawer.contains(event.target) && event.target !== burger) {
                    toggleMenu();
                }
            }

            function toggleMenu() {
                const drawer = document.getElementById("menuDrawer");
                const burger = document.querySelector(".burger");

                drawer.classList.toggle("open");

                if (drawer.classList.contains("open")) {
                    document.addEventListener("click", handleOutsideMenuClick, true); 
                    burger.style.color = "white";
                } else {
                    document.removeEventListener("click", handleOutsideMenuClick, true);
                    burger.style.color = "black";
                }
            }

            function clearUserIdCookie() {
                document.cookie = "userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            }
        </script>
    </div>
</body>
</html>